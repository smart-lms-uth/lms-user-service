spring.application.name=lms-user-service

# Server Configuration
server.port=8080

# ===== DATABASE CONFIGURATION =====
# PostgreSQL (Primary - User Profiles)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/lms_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:lms_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:lms_password}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# ===== MONGODB CONFIGURATION (Activity Logs) =====
spring.data.mongodb.uri=${MONGODB_URI:mongodb://localhost:27017/lms_activities}
spring.data.mongodb.database=${MONGODB_DATABASE:lms_activities}

# ===== REDIS CONFIGURATION (Caching) =====
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.cache.type=redis
spring.cache.redis.time-to-live=3600000

# ===== RABBITMQ CONFIGURATION (Async Messaging) =====
spring.rabbitmq.host=${RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${RABBITMQ_PORT:5672}
spring.rabbitmq.username=${RABBITMQ_USERNAME:guest}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:guest}
spring.rabbitmq.virtual-host=${RABBITMQ_VHOST:/}

# Activity Queue Configuration
app.rabbitmq.queue.activity=activity.logs
app.rabbitmq.exchange.activity=activity.exchange
app.rabbitmq.routing-key.activity=activity.routing.key

# ===== SECURITY CONFIGURATION =====
# JWT Configuration - NO DEFAULT VALUES IN PRODUCTION!
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}
jwt.issuer=${JWT_ISSUER:lms-user-service}

# OAuth2 Configuration - Google - NO DEFAULT VALUES IN PRODUCTION!
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.scope=email,profile
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

# OAuth2 Frontend callback URL
app.oauth2.authorized-redirect-uris=${OAUTH2_REDIRECT_URIS:http://localhost:4200/oauth2/callback}

# ===== ACTUATOR CONFIGURATION =====
management.endpoints.web.exposure.include=health,info,metrics,caches
management.endpoint.health.show-details=when-authorized
management.health.db.enabled=true
management.health.redis.enabled=true
management.health.mongo.enabled=true
management.health.rabbit.enabled=true

# ===== ASYNC CONFIGURATION =====
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=ActivityLog-

# ===== DEFAULT ADMIN CONFIGURATION =====
# Tài khoản admin mặc định khi khởi động lần đầu
app.admin.email=${ADMIN_EMAIL:admin@uth.edu.vn}
app.admin.username=${ADMIN_USERNAME:admin}
app.admin.password=${ADMIN_PASSWORD:Admin@123}
